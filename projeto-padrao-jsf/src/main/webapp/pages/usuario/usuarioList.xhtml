<?xml version="1.0" encoding="ISO-8859-1" ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	template="/template/layout.xhtml">

<ui:define name="content">

	<p:panel header="CADASTRO DE USUÁRIO">
	   <p:messages autoUpdate="true" closable="true"/>
			 
		<h:form id="form-usuario">
		
			<p:toolbar>
			 <f:facet name="left">
				<p:commandButton value="NOVO" oncomplete="PF('dlg2').show();" icon="ui-icon-circle-plus" actionListener="#{usuarioController.novo}" update="form-usuario:modal"/>
			 </f:facet>	      
			</p:toolbar>
			
			<p:spacer height="10"/>
			
		   <p:dataTable value="#{usuarioController.listaUsuarios}" var="u" id="table-user" widgetVar="carsTable">
		     <p:column headerText="Nome" filterBy="#{u.nome}">
				<h:outputText value="#{u.nome}"/>
			</p:column>
		     <p:column headerText="Email">
				<h:outputText value="#{u.email}"/>
			</p:column>
		     <p:column headerText="Perfil">
				<h:outputText value="#{u.perfil}"/>
			</p:column>
		     <p:column headerText="Status">
				<h:outputText value="#{u.flAtivo == 'S' ? 'ATIVO' : 'INATIVO'}"/>
			</p:column>
		    <p:column headerText="Ações" style="width:10%;text-align:center;">
	   			<p:commandButton title="Editar" icon="ui-icon-pencil" oncomplete="PF('dlg2').show();" action="#{usuarioController.selecionaUsuario(u)}" update=":form-usuario:modal"/>
	   			<p:spacer width="10px;" />
				<p:commandButton title="Excluir" icon="ui-icon-trash" action="#{usuarioController.excluir(u)}" update="table-user"  onclick="return confirm('Confirma a exclusão do Usuário #{u.nome} ?');"/>
			</p:column>
		   </p:dataTable>
			   
		   <ui:include src="/pages/usuario/usuarioForm.xhtml" />
	   		      
		</h:form>
	</p:panel>
		 
	</ui:define>
</ui:composition>